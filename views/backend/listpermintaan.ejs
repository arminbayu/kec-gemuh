<% layout('layout_permintaan') -%> 

<div class="container">
    <div class="panel-header bg-primary-gradient">
        <div class="page-inner py-5">
            <div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
                <div>
                    <h2 class="text-white pb-2 fw-bold">List Permintaan</h2>
                    <h5 class="text-white op-7 mb-2">Daftar Permintaan</h5>
                </div>
                
            </div>
        </div>
    </div>
    <div class="page-inner mt--5">
        <div class="row mt--2">
            <div class="col-md-12">
                <div class="card full-height">
                    <div class="card-body">
                        <div class="card-title">List Permintaan</div>
                        <div class="d-flex flex-wrap justify-content-around pb-2 pt-4">
                            <table class="table" id="example">
                                <thead>
                                    <tr>
                                    <th scope="col">No</th>
                                    <th scope="col">Nama</th>
                                    <th scope="col">Barang</th>
                                    <th scope="col">Merk</th>
                                    <th scope="col">Jumlah</th>
                                    <th scope="col">#</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                                </table>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#example').DataTable({
            dom: 'Blfrtip',
            buttons: [
                'excel', 'csv'
            ],
            "lengthMenu": [10, 20, 50, 100, 200, 500, 1000, 5000, 10000],
            "pageLength": 20,
            "processing": true,
            // "serverSide": true,
            ajax: {
                'url':'/permintaan/listPermintaan',
                'type': 'GET'
            },
            columns: [
                {data: 'no', name: 'no'},
                {data: 'nama', name: 'nama'},
                {data: 'barang', name: 'barang'},
                {data: 'merk', name: 'merk'},
                {data: 'jumlah', name: 'jumlah'},
                {data: 'aksi', name: 'aksi'},
            ],
        });
        
    });
    
    function Edit(id, val) {
            var id = $(id).data("id");
            console.log(id);
            $.ajax({
                type: 'ajax',
                method: 'post',
                url: '/permintaan/edit-permintaan',
                data: {
                    "id":id,
                    "status":val,
                },
                async: false,
                dataType: 'json',
                success: function (response) {
                    $("#example").DataTable().ajax.reload(null, false);
                    if (response.status == 200 || response.status == true) {
                        // Swal.fire('Success!', 'Succes Edi Data.', 'success');
                    } else {
                        Swal.fire('Warning!', 'Try Again', 'warning');
                    }
                },
                error: function () {
                    Swal.fire('Failed!', 'Failed Input Data.', 'error');
                }
            });
        }
</script>